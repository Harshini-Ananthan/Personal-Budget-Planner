<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Transaction Form</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
    <h1 th:if="${transaction.transaction_id == null}">Create Transaction</h1>
    <h1 th:if="${transaction.transaction_id != null}">Edit Transaction</h1>

    <form th:action="${transaction.transaction_id == null} ? @{/transactions} : @{/transactions/update/{transaction_id}(transaction_id=${transaction.transaction_id})}"
          th:object="${transaction}" method="post">

        <label>
            Type:
            <select th:field="*{type}" required>
                <option value="">-- Select Type --</option>
                <option value="INCOME">Income</option>
                <option value="EXPENSE">Expense</option>
            </select>
        </label>
        <br/>

        <label> Amount: <input type="number" step="0.01" th:field="*{amount}" required/></label><br/>
        <label> Date: <input type="datetime-local" th:field="*{transaction_date}" required/></label><br/>
        <label> Description: <input type="text" th:field="*{description}" placeholder="Enter description"/></label><br/>

        <!-- User Dropdown -->
        <label>
            User:
            <select th:field="*{user.user_id}" required>
                <option value="">-- Select User --</option>
                <option th:each="user : ${users}"
                        th:value="${user.user_id}"
                        th:text="${user.name}">
                </option>
            </select>
        </label>
        <br/>

        <!-- Category Dropdown -->
        <label>
            Category:
            <select th:field="*{category.category_id}" required>
                <option value="">-- Select Category --</option>
                <option th:each="category : ${categories}"
                        th:value="${category.category_id}"
                        th:text="${category.name}">
                </option>
            </select>
        </label>
        <br/>

        <button type="submit">Save</button>
    </form>
</body>
</html>
